language: python

cache:
  directories:
    - "~/.platformio"

install:
  - pip install -U platformio

addons:
  apt:
    packages:
      - doxygen
      - doxygen-doc

env:
  - BOARD=uno
  - BOARD=mzeropro
  - BOARD=zero
  - BOARD=due

script:
  - make ci

before_deploy:
  - make docs

deploy:
  - provider: releases
    skip_cleanup: true
    on:
      repo: helium/helium-arduino
      tags: true
      condition: $BOARD = uno
  - provider: pages
    skip_cleanup: true
    local_dir: $TRAVIS_BUILD_DIR/docs/html
    on:
      repo: helium/helium-arduino
      condition: $BOARD = uno
